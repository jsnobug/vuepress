# 函数

出处：https://juejin.im/post/6892886272377880583

## 一、高阶函数

在数学和计算机科学中，高阶函数是至少满足下列一个条件的函数：

- 接受一个或多个函数作为输入
- 输出一个函数

接收一个或多个函数作为输入，即函数作为参数传递。这种应用场景，相信很多人都不会陌生。比如常用的 `Array.prototype.map()` 和 `Array.prototype.filter()` 高阶函数：

```js
// Array.prototype.map 高阶函数
const array = [1, 2, 3, 4];
const map = array.map(x => x * 2); // [2, 4, 6, 8]

// Array.prototype.filter 高阶函数
const words = ['semlinker', 'kakuqo', 'lolo', 'abao'];
const result = words.filter(word => word.length > 5); // ["semlinker", "kakuqo"]
```

## 二、函数组合

函数组合就是将两个或两个以上的函数组合生成一个新函数的过程：

```js
const composeFn = function (f, g) {
  return function (x) {
    return f(g(x));
  };
};
```

在以上代码中，`f` 和 `g` 都是函数，而 `x` 是组合生成新函数的参数。

### 2.1 函数组合的作用

在项目开发过程中，为了实现函数的复用，我们通常会尽量保证函数的职责单一

```js
function lowerCase(input) {
  return input && typeof input === "string" ? input.toLowerCase() : input;
}

function upperCase(input) {
  return input && typeof input === "string" ? input.toUpperCase() : input;
}

function trim(input) {
  return typeof input === "string" ? input.trim() : input;
}

function split(input, delimiter = ",") {
  return typeof input === "string" ? input.split(delimiter) : input;
}

function compose (...Fn) {
  console.log(Fn)
  return function (x) {
    return Fn.reduce(function (arg, fn) {
      let fnName = eval(fn) // 将字符串转为函数名
      return fnName(arg)
    }, x)
  }
}

export {
  compose
}

```

使用

```js
import {compose} from '@/utils/text-compose'
const trimLowerCaseAndSplit = compose('trim', 'lowerCase', 'split') // 利用函数组合技术，实现先后执行方法
trimLowerCaseAndSplit('a,b,D')
```

### 2.2 组合函数的实现

核心代码块

```js
function compose (...Fn) {
  return function (x) {
    return Fn.reduce(function (arg, fn) {
      let fnName = eval(fn) // 将字符串转为函数名
      return fnName(arg)
    }, x)
  }
}
```

在以上的代码中，我们通过 [Array.prototype.reduce](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce) 方法来实现组合函数的调度，对应的执行顺序是从左到右。这个执行顺序与 Linux 管道或过滤器的执行顺序是一致的。

不过如果你想从右往左开始执行的话，这时你就可以使用 [Array.prototype.reduceRight](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceRight) 方法来实现。

## 三、柯里化

柯里化（Currying）是一种处理函数中含有多个参数的方法，并在只允许单一参数的框架中使用这些函数。这种转变是现在被称为 “柯里化” 的过程，在这个过程中我们能把一个带有多个参数的函数转换成一系列的嵌套函数。它返回一个新函数，这个新函数期望传入下一个参数。当接收足够的参数后，会自动执行原函数。

**需要特别注意的是，在数学和理论计算机科学中的柯里化函数，一次只能传递一个参数。而对于 JavaScript 语言来说，在实际应用中的柯里化函数，可以传递一个或多个参数**。好的，介绍完柯里化的相关知识，接下来我们来介绍柯里化的作用。

### 3.1 柯里化的作用

#### 3.1.1 参数复用